{"version":3,"file":"static/js/ucare-panel-chunk.cd00b426.chunk.js","mappings":"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","sources":["../node_modules/@uploadcare/react-widget/dist/esm/dialog-9a1a96c1.mjs"],"sourcesContent":["import { b as _slicedToArray, _ as _objectWithoutProperties, a as _objectSpread2, c as _toConsumableArray, d as _createForOfIteratorHelper } from './index-af0ad5a4.mjs';\nimport React, { useState, useMemo, useRef, useEffect, useImperativeHandle } from 'react';\nimport uploadcare from 'uploadcare-widget';\nimport { u as useCommitedCallback, a as useCustomTabs, b as useDeepEffect, d as defaultPreviewUrlCallback } from './default-preview-url-callback-99f7fcfa.mjs';\nimport 'react-fast-compare';\nimport '@uploadcare/client-suspense';\n\nvar _excluded = [\"value\", \"apiRef\", \"onTabChange\", \"onChange\", \"onProgress\", \"customTabs\", \"previewUrlCallback\", \"metadataCallback\"];\nvar containerStyles = {\n  height: '500px',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nvar getHiddenDoneButtonStyle = function getHiddenDoneButtonStyle(containerId) {\n  return (\n    /* css */\n    \"\\n  .\".concat(containerId, \" .uploadcare--preview__done:not(.uploadcare-tab-effects--done),\\n  .\").concat(containerId, \" .uploadcare--panel__done:not(.uploadcare-tab-effects--done) {\\n    display: none;\\n  }\\n\")\n  );\n};\n\nvar getValueItems = function getValueItems(value, props) {\n  var uuids = [];\n\n  if (value) {\n    uuids = Array.isArray(value) ? value : [value];\n  }\n\n  return uuids;\n};\n\nvar useDialog = function useDialog(props, uploadcare) {\n  var value = props.value,\n      apiRef = props.apiRef,\n      onTabChange = props.onTabChange,\n      onChange = props.onChange,\n      onProgress = props.onProgress,\n      customTabs = props.customTabs,\n      previewUrlCallback = props.previewUrlCallback,\n      metadataCallback = props.metadataCallback,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var tabsCss = restProps.tabsCss,\n      locale = restProps.locale,\n      localeTranslations = restProps.localeTranslations,\n      localePluralize = restProps.localePluralize;\n  var panelContainer = useRef(null);\n  var panelInstance = useRef(null);\n  var onTabChangeCallback = useCommitedCallback(onTabChange);\n  var onChangeCallback = useCommitedCallback(onChange);\n  var onProgressCallback = useCommitedCallback(onProgress);\n  var metadataCommitedCallback = useCommitedCallback(metadataCallback);\n  var previewUrlCommitedCallback = useCommitedCallback(previewUrlCallback || defaultPreviewUrlCallback);\n  useCustomTabs(customTabs, uploadcare);\n  useDeepEffect(function () {\n    if (locale) window.UPLOADCARE_LOCALE = locale;\n    if (localePluralize) window.UPLOADCARE_LOCALE_PLURALIZE = localePluralize;\n\n    if (localeTranslations) {\n      window.UPLOADCARE_LOCALE_TRANSLATIONS = localeTranslations;\n    }\n\n    return function () {\n      if (locale) delete window.UPLOADCARE_LOCALE;\n      if (localePluralize) delete window.UPLOADCARE_LOCALE_PLURALIZE;\n      if (localeTranslations) delete window.UPLOADCARE_LOCALE_TRANSLATIONS;\n    };\n  }, [locale, localePluralize, localeTranslations]);\n  useEffect(function () {\n    if (uploadcare && tabsCss && typeof tabsCss === 'string') {\n      if (tabsCss.indexOf('https://') === 0) {\n        uploadcare.tabsCss.addUrl(tabsCss);\n      } else {\n        uploadcare.tabsCss.addStyle(tabsCss);\n      }\n    }\n  }, [uploadcare, tabsCss]);\n  useEffect(function () {\n    var files = getValueItems(value);\n    panelInstance.current && panelInstance.current.reject();\n    panelInstance.current = uploadcare.openPanel(panelContainer.current, files, _objectSpread2(_objectSpread2({\n      multipleMax: restProps.multiple ? undefined : 1\n    }, restProps), {}, {\n      multiple: true,\n      metadataCallback: restProps.metadata ? undefined : metadataCommitedCallback,\n      previewUrlCallback: previewUrlCommitedCallback\n    })); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [uploadcare].concat(_toConsumableArray(Object.values(restProps))));\n  useEffect(function () {\n    var dialogApi = panelInstance.current;\n    dialogApi.progress(onTabChangeCallback);\n\n    var onChangeWrapper = function onChangeWrapper() {\n      var items = panelInstance.current.fileColl.__items.map(function (deferred) {\n        return deferred.promise();\n      });\n\n      onChangeCallback(items);\n    };\n\n    var onProgressWrapper = function onProgressWrapper() {\n      var lastProgresses = panelInstance.current.fileColl.lastProgresses();\n      onProgressCallback(lastProgresses);\n    };\n\n    dialogApi.fileColl.anyProgressList.add(onProgressWrapper);\n    dialogApi.fileColl.anyDoneList.add(onChangeWrapper);\n    dialogApi.fileColl.anyFailList.add(onChangeWrapper);\n    dialogApi.fileColl.onRemove.add(onChangeWrapper);\n    dialogApi.fileColl.onReplace.add(onChangeWrapper);\n    dialogApi.fileColl.onSort.add(onChangeWrapper);\n    return function () {\n      var dialogApi = panelInstance.current;\n      dialogApi.fileColl.anyProgressList.remove(onProgressWrapper);\n      dialogApi.fileColl.anyDoneList.remove(onChangeWrapper);\n      dialogApi.fileColl.anyFailList.remove(onChangeWrapper);\n      dialogApi.fileColl.onRemove.remove(onChangeWrapper);\n      dialogApi.fileColl.onReplace.remove(onChangeWrapper);\n      dialogApi.fileColl.onSort.remove(onChangeWrapper);\n    };\n  }, [].concat(_toConsumableArray(Object.values(restProps)), [onTabChangeCallback, onChangeCallback, onProgressCallback]));\n  useImperativeHandle(apiRef, function () {\n    return {\n      onTabVisibility: function onTabVisibility(cb) {\n        return panelInstance.current.onTabVisibility(cb);\n      },\n      hideTab: function hideTab(tab) {\n        return panelInstance.current.hideTab(tab);\n      },\n      showTab: function showTab(tab) {\n        return panelInstance.current.showTab(tab);\n      },\n      switchTab: function switchTab(tab) {\n        return panelInstance.current.switchTab(tab);\n      },\n      addFiles: function addFiles(files) {\n        return panelInstance.current.addFiles(files);\n      },\n      isTabVisible: function isTabVisible(tab) {\n        return panelInstance.current.isTabVisible(tab);\n      },\n      getFileColl: function getFileColl() {\n        return panelInstance.current.fileColl;\n      },\n      getRawDialogApi: function getRawDialogApi() {\n        return panelInstance.current;\n      }\n    };\n  }, []);\n  useEffect(function () {\n    return function () {\n      return panelInstance.current && panelInstance.current.reject();\n    };\n  }, []);\n  useEffect(function () {\n    var isUpdated = false;\n    panelInstance.current.fileColl.clear();\n    var files = getValueItems(value);\n\n    var _iterator = _createForOfIteratorHelper(files),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n\n        if (typeof item === 'string' && item.includes('~')) {\n          uploadcare.loadFileGroup(item, props).then(function (fileGroup) {\n            // value could be changed after group loaded\n            if (!isUpdated) {\n              var _files = fileGroup.files();\n\n              panelInstance.current.addFiles(_files);\n            }\n          });\n          break;\n        }\n\n        panelInstance.current.fileColl.add(uploadcare.fileFrom('uploaded', item, props));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return function () {\n      isUpdated = true;\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [value]);\n  return [panelContainer];\n};\n\nvar Dialog = function Dialog(props) {\n  var _useState = useState(function () {\n    return \"uploadcare-\".concat(Date.now());\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      containerId = _useState2[0];\n\n  var styleElement = useMemo(function () {\n    return /*#__PURE__*/React.createElement(\"style\", null, getHiddenDoneButtonStyle(containerId));\n  }, [containerId]);\n\n  var _useDialog = useDialog(props, uploadcare),\n      _useDialog2 = _slicedToArray(_useDialog, 1),\n      containerRef = _useDialog2[0];\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: props.id,\n    className: containerId,\n    style: containerStyles\n  }, styleElement, /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef\n  }));\n};\n\nexport { Dialog as default };\n"],"names":["_excluded","containerStyles","height","display","flexDirection","alignItems","justifyContent","getValueItems","value","props","uuids","Array","isArray","Dialog","_useState","useState","concat","Date","now","containerId","_slicedToArray","styleElement","useMemo","React","getHiddenDoneButtonStyle","_useDialog","uploadcare","apiRef","onTabChange","onChange","onProgress","customTabs","previewUrlCallback","metadataCallback","restProps","_objectWithoutProperties","tabsCss","locale","localeTranslations","localePluralize","panelContainer","useRef","panelInstance","onTabChangeCallback","useCommitedCallback","onChangeCallback","onProgressCallback","metadataCommitedCallback","previewUrlCommitedCallback","defaultPreviewUrlCallback","useCustomTabs","useDeepEffect","window","UPLOADCARE_LOCALE","UPLOADCARE_LOCALE_PLURALIZE","UPLOADCARE_LOCALE_TRANSLATIONS","useEffect","indexOf","addUrl","addStyle","files","current","reject","openPanel","_objectSpread2","multipleMax","multiple","undefined","metadata","_toConsumableArray","Object","values","dialogApi","progress","onChangeWrapper","items","fileColl","__items","map","deferred","promise","onProgressWrapper","lastProgresses","anyProgressList","add","anyDoneList","anyFailList","onRemove","onReplace","onSort","remove","useImperativeHandle","onTabVisibility","cb","hideTab","tab","showTab","switchTab","addFiles","isTabVisible","getFileColl","getRawDialogApi","isUpdated","clear","_step","_iterator","_createForOfIteratorHelper","s","n","done","item","includes","loadFileGroup","then","fileGroup","_files","fileFrom","err","e","f","useDialog","containerRef","id","className","style","ref"],"sourceRoot":""}